{
  "hash": "7cb31b6f52fdc7a7000bd7cc3513b3ac",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Hierarchical Bayesian Model\ndescription: \"\"\nauthors:\n  - name: Christian González-Marterl\n    orcid: 0000-0003-1081-0843\nexecute:\n  warnings: false\n  messages: false\nhtml-table-processing: none\n\n---\n\n\nTo analyze score heterogeneity, we applied a Bayesian hierarchical model. Hierarchical models, also known as multilevel models, are useful when data are structured in groups or clusters. In this study, reviews are grouped by the site and airline. This hierarchical structure allows us to account for the variability at both the site and airline levels.\n\nBayesian hierarchical models are powerful tools for analyzing data with nested or grouped structures. These models have two main levels:\n\n- **Fixed Effects**: These are the overall effects that apply to the entire population. In our study, the fixed effects include the site and airline.\n- **Random Effects**: These account for the variability within groups. In our study, the random effects capture the variability within each site and airline.\n\nIn our analysis, following @bianchi2021a, we model the review scores using a Poisson distribution. \n\n$$\nPr(X\\vert \\lambda)=\\frac{\\exp{(-\\lambda)}\\lambda^x}{x!}\n$$\n\nThis choice is appropriate because the scores are count data, which can naturally be modeled using a Poisson distribution. The Poisson distribution is widely used for modeling the number of events occurring within a fixed interval of time or space when these events happen with a known constant mean rate and independently of the time since the last event. This fits well with the nature of review scores, which can be considered as counts of discrete ratings.\n\nThe general form of a Bayesian hierarchical model can be expressed as:\n\n**Level 1 (Individual reviews):**\n\n$$\n\\text{score}_{ijk} \\sim \\text{Poisson}(\\lambda_{ijk})\n$$  \n\n$$\n\\log(\\lambda_{ijk}) = \\alpha + \\beta_{i} + \\gamma_{j} + \\delta_{i \\times j} + \\epsilon_{ijk}\n$$\n\nWhere:\n\n- $\\lambda_{ijk}$ is the expected score for review $k$ on site $i$ for airline $j$.\n- $\\alpha$ is the overall intercept.\n- $\\beta_{i}$ is the effect of site $i$.\n- $\\gamma_{j}$ is the effect of airline $j$.\n- $\\delta_{i \\times j}$ is the interaction effect between site $i$ and airline $j$.\n- $\\epsilon_{ijk}$ is the random error term.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nlibrary(readr)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'readr' was built under R version 4.3.2\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nlibrary(brms)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'brms' was built under R version 4.3.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nLoading required package: Rcpp\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'Rcpp' was built under R version 4.3.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nLoading 'brms' package (version 2.21.0). Useful instructions\ncan be found by typing help('brms'). A more detailed introduction\nto the package is available through vignette('brms_overview').\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n\nAttaching package: 'brms'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nThe following object is masked from 'package:stats':\n\n    ar\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'tidyverse' was built under R version 4.3.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'ggplot2' was built under R version 4.3.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'tibble' was built under R version 4.3.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'tidyr' was built under R version 4.3.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'purrr' was built under R version 4.3.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'dplyr' was built under R version 4.3.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'stringr' was built under R version 4.3.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'forcats' was built under R version 4.3.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'lubridate' was built under R version 4.3.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ purrr     1.0.2\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.0     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nlibrary(broom)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'broom' was built under R version 4.3.2\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nlibrary(broom.mixed)\nlibrary(broom.helpers)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'broom.helpers' was built under R version 4.3.3\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nlibrary(gt)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'gt' was built under R version 4.3.3\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nlibrary(gtsummary)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'gtsummary' was built under R version 4.3.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n\nAttaching package: 'gtsummary'\n\nThe following objects are masked from 'package:broom.helpers':\n\n    all_categorical, all_continuous, all_contrasts, all_dichotomous,\n    all_interaction, all_intercepts\n```\n\n\n:::\n:::\n\n\nLoad the data from the RDS file `combined_data.rds`. \n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nairline_data <- read_rds(\"data/combined_data.rds\") |> \n  filter(date >= as.Date(\"2023-01-01\") & date <= as.Date(\"2023-12-31\")) |> \n  mutate(\n    score = score*2, # Poisson distribution adjustment\n    site = as_factor(site),\n    airline = as_factor(airline)\n  )\n```\n:::\n\n\nSet up the model formula. We'll model the score as a Poisson-distributed outcome with both fixed and random effects for `site` and `airline`:\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nformula <- score ~ site * airline + (1 | site) + (1 | airline)\n```\n:::\n\n\nUse the `brm` function to fit the hierarchical Bayesian model:\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nmodel_file <- \"model_outputs/fit_model_poisson.rds\"\n\nif (file.exists(model_file)) {\n  # Cargar el modelo guardado\n  fit <- readRDS(model_file)\n  message(\"model loaded from saved.\")\n} else {\n  # Ajustar el modelo\n  fit <- brm(formula, data = airline_data, family = poisson(),\n             chains = 2, iter = 1000, warmup = 500, thin = 2, cores = 4,\n             control = list(adapt_delta = 0.8))\n  # Guardar el modelo ajustado\n  saveRDS(fit, model_file)\n  message(\"model fitted and saved.\")\n}\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nmodel loaded from saved.\n```\n\n\n:::\n:::\n\n\nSummarize the model results\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nsummary(fit)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: Parts of the model have not converged (some Rhats are > 1.05). Be\ncareful when analysing the results! We recommend running more iterations and/or\nsetting stronger priors.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: There were 33 divergent transitions after warmup. Increasing\nadapt_delta above 0.8 may help. See\nhttp://mc-stan.org/misc/warnings.html#divergent-transitions-after-warmup\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n Family: poisson \n  Links: mu = log \nFormula: score ~ site * airline + (1 | site) + (1 | airline) \n   Data: airline_data (Number of observations: 6210) \n  Draws: 2 chains, each with iter = 1000; warmup = 500; thin = 2;\n         total post-warmup draws = 500\n\nMultilevel Hyperparameters:\n~airline (Number of levels: 2) \n              Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS\nsd(Intercept)     1.71      1.28     0.10     4.84 1.01      226      322\n\n~site (Number of levels: 2) \n              Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS\nsd(Intercept)     1.68      1.30     0.07     5.02 1.03      214      335\n\nRegression Coefficients:\n                               Estimate Est.Error l-95% CI u-95% CI Rhat\nIntercept                          1.05      2.37    -3.67     6.17 1.01\nsiteTRIPADVISOR                   -0.03      2.14    -4.65     4.39 1.07\nairlineRYANAIR                     0.14      2.57    -5.67     5.87 1.02\nsiteTRIPADVISOR:airlineRYANAIR    -0.18      0.06    -0.30    -0.05 1.01\n                               Bulk_ESS Tail_ESS\nIntercept                           156      204\nsiteTRIPADVISOR                     138       85\nairlineRYANAIR                      138      164\nsiteTRIPADVISOR:airlineRYANAIR      297      223\n\nDraws were sampled using sampling(NUTS). For each parameter, Bulk_ESS\nand Tail_ESS are effective sample size measures, and Rhat is the potential\nscale reduction factor on split chains (at convergence, Rhat = 1).\n```\n\n\n:::\n:::\n\n::: {#tbl-results .cell tbl-alt='Summary of Bayesian Hierarchical Model Results including Fixed and Random Effects.' tbl-cap=' Summary of Bayesian Hierarchical Model Results including Fixed (population-level) and Random Effects (group-level).'}\n\n```{.r .cell-code .hidden}\n#| label: tbl-results\n#| tbl-alt: \"Summary of Bayesian Hierarchical Model Results including Fixed and Random Effects.\"\n#| tbl-cap: \" Summary of Bayesian Hierarchical Model Results including Fixed (population-level) and Random Effects (group-level).\"\n\nfit |> tbl_regression(tidy_fun = broom.mixed::tidy,\n                      intercept=TRUE,\n                      estimate_fun = ~ style_sigfig(.x, digits = 3))\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"tkbvxksruy\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#tkbvxksruy table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#tkbvxksruy thead, #tkbvxksruy tbody, #tkbvxksruy tfoot, #tkbvxksruy tr, #tkbvxksruy td, #tkbvxksruy th {\n  border-style: none;\n}\n\n#tkbvxksruy p {\n  margin: 0;\n  padding: 0;\n}\n\n#tkbvxksruy .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#tkbvxksruy .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#tkbvxksruy .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#tkbvxksruy .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#tkbvxksruy .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#tkbvxksruy .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tkbvxksruy .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#tkbvxksruy .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#tkbvxksruy .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#tkbvxksruy .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#tkbvxksruy .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#tkbvxksruy .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#tkbvxksruy .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#tkbvxksruy .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#tkbvxksruy .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#tkbvxksruy .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#tkbvxksruy .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#tkbvxksruy .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#tkbvxksruy .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tkbvxksruy .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#tkbvxksruy .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#tkbvxksruy .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#tkbvxksruy .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tkbvxksruy .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#tkbvxksruy .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#tkbvxksruy .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tkbvxksruy .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tkbvxksruy .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#tkbvxksruy .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tkbvxksruy .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#tkbvxksruy .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tkbvxksruy .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#tkbvxksruy .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tkbvxksruy .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#tkbvxksruy .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tkbvxksruy .gt_left {\n  text-align: left;\n}\n\n#tkbvxksruy .gt_center {\n  text-align: center;\n}\n\n#tkbvxksruy .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#tkbvxksruy .gt_font_normal {\n  font-weight: normal;\n}\n\n#tkbvxksruy .gt_font_bold {\n  font-weight: bold;\n}\n\n#tkbvxksruy .gt_font_italic {\n  font-style: italic;\n}\n\n#tkbvxksruy .gt_super {\n  font-size: 65%;\n}\n\n#tkbvxksruy .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#tkbvxksruy .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#tkbvxksruy .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#tkbvxksruy .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#tkbvxksruy .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#tkbvxksruy .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#tkbvxksruy .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#tkbvxksruy .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#tkbvxksruy div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;div data-qmd-base64=&quot;KipDaGFyYWN0ZXJpc3RpYyoq&quot;&gt;&lt;div class='gt_from_md'&gt;&lt;p&gt;&lt;strong&gt;Characteristic&lt;/strong&gt;&lt;/p&gt;&#10;&lt;/div&gt;&lt;/div&gt;\"><div data-qmd-base64=\"KipDaGFyYWN0ZXJpc3RpYyoq\"><div class='gt_from_md'><p><strong>Characteristic</strong></p>\n</div></div></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;div data-qmd-base64=&quot;KipCZXRhKio=&quot;&gt;&lt;div class='gt_from_md'&gt;&lt;p&gt;&lt;strong&gt;Beta&lt;/strong&gt;&lt;/p&gt;&#10;&lt;/div&gt;&lt;/div&gt;\"><div data-qmd-base64=\"KipCZXRhKio=\"><div class='gt_from_md'><p><strong>Beta</strong></p>\n</div></div></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;div data-qmd-base64=&quot;Kio5NSUgQ0kqKg==&quot;&gt;&lt;div class='gt_from_md'&gt;&lt;p&gt;&lt;strong&gt;95% CI&lt;/strong&gt;&lt;/p&gt;&#10;&lt;/div&gt;&lt;/div&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;line-height: 0;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><div data-qmd-base64=\"Kio5NSUgQ0kqKg==\"><div class='gt_from_md'><p><strong>95% CI</strong></p>\n</div></div><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height: 0;\"><sup>1</sup></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">(Intercept)</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.05</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">-3.67, 6.17</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">site</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    SKYTRAX</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">—</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">—</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    TRIPADVISOR</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">-0.034</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">-4.65, 4.39</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">airline</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    LUFTHANSA</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">—</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">—</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    RYANAIR</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.144</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">-5.67, 5.87</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">site * airline</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    TRIPADVISOR * RYANAIR</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">-0.178</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">-0.299, -0.050</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">airline.sd__(Intercept)</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.71</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">0.095, 4.84</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">site.sd__(Intercept)</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.68</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">0.074, 5.02</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"3\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height: 0;\"><sup>1</sup></span> <div data-qmd-base64=\"Q0kgPSBDcmVkaWJsZSBJbnRlcnZhbA==\"><div class='gt_from_md'><p>CI = Credible Interval</p>\n</div></div></td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\nPlot the results\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nplot(fit)\n```\n\n::: {.cell-output-display}\n![](hierarchical-bayesian-model_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](hierarchical-bayesian-model_files/figure-html/unnamed-chunk-7-2.png){width=672}\n:::\n:::",
    "supporting": [
      "hierarchical-bayesian-model_files\\figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}